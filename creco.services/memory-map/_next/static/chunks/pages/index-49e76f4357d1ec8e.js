(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7995:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var n=r(3574),c=r(4336),i=r(638),o=r(6189),a=r.n(o),u=r(7840),s=r(2818),p=r(9953),l=r(8214),f=r(3672),d=r(7150),h={name:"1ke7uei",styles:"min-height:200px;width:100%;resize:none;outline:none"},b={name:"2qga7i",styles:"text-align:right"};function y(e){var t=e.onSubmit,r=(0,p.useState)(""),n=r[0],i=r[1],o=(0,p.useState)(!1),u=o[0],s=o[1];return(0,d.BX)(l.W,{children:[(0,d.tZ)("section",{children:(0,d.tZ)("textarea",{css:h,onChange:function(e){return i(e.target.value)},value:n})}),(0,d.tZ)("div",{css:b,children:(0,d.tZ)(f.z,{disabled:u,onClick:(0,c.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,t({content:n});case 3:i(""),s(!1);case 5:case"end":return e.stop()}},e)})),children:u?"로딩":"작성"})})]})}var g=r(7930),m={name:"a07gmx",styles:"font-size:2rem"},O={name:"2qga7i",styles:"text-align:right"};function v(e){var t=e.content,r=e.created,n=e.onClick;return(0,d.BX)(x,{onClick:n,children:[(0,d.tZ)("div",{css:m,children:t}),(0,d.tZ)("div",{css:O,children:(0,d.tZ)("span",{children:new Date(r).toLocaleString()})})]})}var x=function(e){var t=e.children,r=e.onClick,n=(0,p.useState)(!1),c=n[0],i=n[1];return(0,d.tZ)("div",{onClick:r,onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},css:(0,g.css)({width:"720px",margin:"32px auto",padding:"16px 24px 12px",cursor:"pointer",borderRadius:"10px",background:"".concat(c?"#c8c8c8":"unset"),boxShadow:"rgb(0 0 0 / 20%) 0px 4px 8px 0px, rgb(0 0 0 / 19%) 0px 6px 20px 0px"},"",""),children:t})},w=r(1436),P=r(2344);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var Z=r(3542),k=r(5856);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _={name:"19hd517",styles:"margin:0 auto;width:720px"},E=function(){var e,t,r,o,f,h,b,g,m=(0,s.useRouter)(),O=(0,p.useState)(!1),x=O[0],D=O[1],E=(t=(0,k.P)(),r=(0,i.Z)(t,1)[0],f=(o=(0,Z.a)(["fetchMemoryList",null==r?void 0:r.login],(0,c.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((null==r?void 0:r.login)!=null){e.next=4;break}e.t0=[],e.next=7;break;case 4:return e.next=6,u.ResourceAPI.of("memory").readList();case 6:e.t0=e.sent.data;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)})),{initialData:[]})).data,h=o.refetch,[f,h,b=o.isLoading,o.isFetching]),C=(0,i.Z)(E,4),R=C[0],q=C[1],L=C[3],N=(g=(0,s.useRouter)(),{resetQueryParam:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},g.query);delete t[e],g.replace({pathname:g.pathname,query:t})}}).resetQueryParam;return((0,p.useEffect)(function(){if(m.isReady){var e=m.query.code;if(null==e||Array.isArray(e)){D(!1);return}D(!0),localStorage.setItem("authorization",e),N("code")}},[m]),x)?(0,d.tZ)("div",{children:"로그인 중"}):(0,d.BX)("div",{children:[(0,d.tZ)(P.t,{}),(0,d.tZ)(w.D,{css:_,children:"\uD83D\uDCDD 메모리 기록하기"}),(0,d.tZ)(y,{onSubmit:(e=(0,c.Z)(a().mark(function e(t){var r;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.content,e.next=3,u.ResourceAPI.of("memory").create({resource:{content:r},summary:{content:r.split("\n")[0]}});case 3:return e.next=5,q();case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})}),(0,d.tZ)("br",{}),(0,d.tZ)(l.W,{children:(L?[]:R).map(function(e){return(0,d.tZ)(v,S(S({},e),{},{onClick:function(){m.push("/memo/".concat(e.id))}}),e.id)})})]})}},522:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7995)}])}},function(e){e.O(0,[435,306,774,888,179],function(){return e(e.s=522)}),_N_E=e.O()}]);