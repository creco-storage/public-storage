(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7942:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return q}});var n=r(3574),c=r(4336),o=r(638),i=r(6189),a=r.n(i),u=r(2818),s=r(9953);function p(){var e=localStorage.getItem("authorization");return null!=e?{Authorization:e}:{}}var f=function(){return"localhost"===window.location.hostname?"https://app.divops.kr":"www.creco.services"===window.location.hostname?"https://app.divops.kr":void 0};function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e,t){return y.apply(this,arguments)}function y(){return(y=(0,c.Z)(a().mark(function e(t,r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f(),"/github-api/api/resource/create"),{method:"POST",headers:h({"Content-Type":"application/json"},p()),body:JSON.stringify({model:"memory",resource:t,summary:r})});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var O=r(2656),d={name:"1yw9g6n",styles:"min-height:200px;min-width:300px;resize:none"};function v(e){var t=e.onSubmit,r=(0,s.useState)(""),n=r[0],o=r[1],i=(0,s.useState)(!1),u=i[0],p=i[1];return(0,O.BX)("div",{children:[(0,O.tZ)("h3",{children:"\uD83D\uDCDD 메모리 기록하기"}),(0,O.tZ)("section",{children:(0,O.tZ)("textarea",{css:d,value:n,onChange:function(e){return o(e.target.value)}})}),(0,O.tZ)("button",{disabled:u,onClick:(0,c.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,t({content:n},{content:n.split("\n")[0]});case 3:o(""),p(!1);case 5:case"end":return e.stop()}},e)})),children:u?"로딩":"작성"})]})}var w=r(8213),g=r(265);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function P(){return Z.apply(this,arguments)}function Z(){return(Z=(0,c.Z)(a().mark(function e(){var t;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f(),"/github-api/api/user/info"),{method:"GET",headers:m({},p())});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=function(){location.assign("".concat(f(),"/github-api/request?referrer=").concat(location.href))},D=["fetchUserInfo"];function x(){var e=(0,w.NL)(),t=(0,g.a)(D,P),r=t.data,n=t.refetch,c=function(){e.invalidateQueries(D),localStorage.removeItem("authorization"),n()};return[null==r?void 0:r.data,k,c]}function S(){var e=x(),t=(0,o.Z)(e,3),r=t[0],n=t[1],c=t[2];return null==r?(0,O.BX)(_,{children:[(0,O.tZ)("h2",{children:"로그인하기"}),(0,O.tZ)("button",{onClick:n,children:"로그인"})]}):(0,O.BX)(_,{children:[(0,O.tZ)("h2",{children:"환영합니다, ".concat(r.login,"님!")}),(0,O.tZ)("button",{onClick:c,children:"로그아웃"})]})}x.key=D;var E={name:"bcffy2",styles:"display:flex;align-items:center;justify-content:space-between"},_=function(e){return(0,O.tZ)("div",{css:E,children:e.children})};function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T(){return X.apply(this,arguments)}function X(){return(X=(0,c.Z)(a().mark(function e(){var t,r,n,c,o=arguments;return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===(r=(o.length>0&&void 0!==o[0]?o[0]:{}).pageNo)?1:r,e.next=3,fetch("".concat(f(),"/github-api/api/resource/readList?model=memory&pageNo=").concat(n),{method:"GET",headers:C({},p())});case 3:return c=e.sent,e.next=6,c.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var q=function(){var e,t,r,i,p,f,l=(0,u.useRouter)(),h=(0,s.useState)(!1),y=h[0],d=h[1],w=(r=x(),i=(0,o.Z)(r,1)[0],[f=(p=(0,g.a)(["fetchMemoryList",null==i?void 0:i.login],(0,c.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((null==i?void 0:i.login)!=null){e.next=4;break}e.t0=[],e.next=7;break;case 4:return e.next=6,T();case 6:e.t0=e.sent.data;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)})),{initialData:[]})).data,p.refetch]),j=(0,o.Z)(w,2),m=j[0],P=j[1],Z=(e=(0,u.useRouter)(),{resetQueryParam:function(t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.query);delete r[t],e.replace({pathname:e.pathname,query:r})}}).resetQueryParam;return((0,s.useEffect)(function(){if(l.isReady){var e=l.query.code;if(null==e||Array.isArray(e)){d(!1);return}d(!0),localStorage.setItem("authorization",e),Z("code")}},[l]),y)?(0,O.tZ)("div",{children:"로그인 중"}):(0,O.BX)("div",{children:[(0,O.tZ)(S,{}),(0,O.tZ)(v,{onSubmit:(t=(0,c.Z)(a().mark(function e(t,r){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t,r);case 2:return e.next=4,P();case 4:case"end":return e.stop()}},e)})),function(e,r){return t.apply(this,arguments)})}),(0,O.tZ)("br",{}),m.map(function(e){return(0,O.tZ)("div",{children:JSON.stringify(e)},e.id)})]})}},522:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(7942)}])}},function(e){e.O(0,[466,774,888,179],function(){return e(e.s=522)}),_N_E=e.O()}]);