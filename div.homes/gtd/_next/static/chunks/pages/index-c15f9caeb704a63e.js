(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{216:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return X}});var r=n(1002),o=n(6363),i=n(1785),a=n.n(i),c=n(1387),u=n.n(c),s=n(9953),l=n(5262).GitHubOAuthSdk.of({baseUrl:"https://app.divops.kr/github-api",getAuthorization:function(){var e=localStorage.getItem("authorization");if(null==e||""===e)throw Error("Authorization is null. (".concat(e,")"));return e}}),d=l.UserAPI,f=l.ResourceAPI.of({model:"gtd-todo"}),h=n(4531),p=n(230),g=n(7048);function v(e){var t=e.size;return(0,g.tZ)("div",{css:(0,p.css)("width:100%;height:",t,"px;","")})}var b={Horizontal:function(e){var t=e.children,n=e.className,r=e.align;return(0,g.tZ)("div",{className:n,css:(0,p.css)("display:flex;justify-content:",void 0===r?"center":r,";align-items:center;",""),children:t})},Vertical:function(e){var t=e.children,n=e.className,r=e.align,o=void 0===r?"center":r;return(0,g.tZ)("div",{className:n,css:(0,p.css)("display:flex;flex-direction:column;align-items:","right"===o?"end":"left"===o?"start":"center",";",""),children:t})}},m=n(4039),k=n(505),w=["UserKey"];function y(){var e=(0,s.useState)(!0),t=e[0],n=e[1],r=(0,m.NL)();(0,s.useEffect)(function(){var e=setTimeout(function(){return n(!1)},200);return function(){return clearTimeout(e)}},[]);var o=(0,k.a)([].concat(w,[t]),d.fetchUser,{refetchOnMount:!0,refetchOnReconnect:!0,refetchOnWindowFocus:!0}),i=o.data,a=o.refetch,c=function(){r.invalidateQueries(w),localStorage.removeItem("authorization"),a()};return{data:null==i?void 0:i.data,isLoading:t,login:d.loginUser,logout:c}}y.key=w;var Z={name:"1xaqboo",styles:"border:unset;background:unset;word-break:keep-all;text-decoration:underline;cursor:pointer;:hover{color:blue;}"},x={name:"1xaqboo",styles:"border:unset;background:unset;word-break:keep-all;text-decoration:underline;cursor:pointer;:hover{color:blue;}"},O={name:"nkt64x",styles:"margin-right:10px"};function z(){var e,t=y(),n=t.data,r=t.login,o=t.logout;return(0,g.BX)(b.Horizontal,{align:"space-between",children:[(0,g.tZ)("h1",{children:"Getting Things Done"}),(0,g.BX)(b.Horizontal,{align:"right",children:[(0,g.tZ)("h4",{css:O,children:null!==(e=null==n?void 0:n.login)&&void 0!==e?e:"guest"}),null==n?(0,g.tZ)("button",{onClick:r,css:x,children:"로그인"}):(0,g.tZ)("button",{onClick:function(){o(),u().reload()},css:Z,children:"로그아웃"})]})]})}var P=n(2700);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var _={of:function(e){if("todo"===e)return f}},E={name:"1xaqboo",styles:"border:unset;background:unset;word-break:keep-all;text-decoration:underline;cursor:pointer;:hover{color:blue;}"},N={name:"1watsfl",styles:"width:100%;font-size:1.6rem;word-break:keep-all;white-space:pre-line"},S={name:"255c6r",styles:"word-break:keep-all"},C={name:"vvvkso",styles:"word-break:keep-all;resize:none;width:100%;outline:none!important;:focus{background-color:#f0f0f0;}"},X=function(){var e,t,n,i,u,l,d,p,m=(0,c.useRouter)(),w=(0,s.useState)(!1),Z=w[0],x=w[1],O=(t=(0,c.useRouter)(),{resetQueryParam:function(e){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach(function(t){(0,P.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.query);delete n[e],t.replace({pathname:t.pathname,query:n})}}).resetQueryParam,X=y(),A=X.isLoading,q=X.data;X.login,X.logout;var B=(n="todo",i=y().data,l=(u=(0,k.a)(["fetchList",null==i?void 0:i.login,n],(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((null==i?void 0:i.login)!=null){e.next=4;break}e.t0=[],e.next=7;break;case 4:return e.next=6,_.of(n).readList();case 6:e.t0=e.sent.data;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)})),{initialData:[]})).data,d=u.refetch,[l,d,p=u.isLoading,u.isFetching]),D=(0,o.Z)(B,2),H=D[0],L=D[1],I=(0,s.useState)(),R=I[0],T=I[1];return((0,s.useEffect)(function(){if(m.isReady){var e=m.query.code;if(null==e||Array.isArray(e)){x(!1);return}x(!0),localStorage.setItem("authorization",e),O("code")}},[m]),Z||A)?(0,g.tZ)("div",{children:"로그인 중"}):(0,g.BX)("main",{children:[(0,g.tZ)(v,{size:10}),(0,g.tZ)(z,{}),(0,g.tZ)(v,{size:30}),null==q?(0,g.tZ)(g.HY,{}):(0,g.BX)(h.W,{width:720,children:[(0,g.BX)(b.Vertical,{align:"right",children:[(0,g.tZ)("textarea",{spellCheck:!1,css:C,rows:Math.max(null!==(e=null==R?void 0:R.split("\n").length)&&void 0!==e?e:0,2),value:R,onChange:function(e){return T(e.target.value)}}),(0,g.tZ)(v,{size:4}),(0,g.tZ)("button",{onClick:(0,r.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.create({resource:{},summary:{contents:R}});case 2:return T(""),e.next=5,L();case 5:case"end":return e.stop()}},e)})),css:S,children:"입력"})]}),(0,g.tZ)(v,{size:20}),(0,g.tZ)("ul",{children:H.map(function(e){return(0,g.tZ)("li",{children:(0,g.BX)(b.Horizontal,{children:[(0,g.tZ)("p",{css:N,children:e.contents}),(0,g.tZ)("button",{css:E,onClick:(0,r.Z)(a().mark(function t(){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.delete({id:e.id});case 2:return t.next=4,L();case 4:case"end":return t.stop()}},t)})),children:"삭제"})]})})})})]})]})}},9638:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(216)}])}},function(e){e.O(0,[31,774,888,179],function(){return e(e.s=9638)}),_N_E=e.O()}]);