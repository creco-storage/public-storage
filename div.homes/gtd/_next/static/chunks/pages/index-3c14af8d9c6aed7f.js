(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9079:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return k}});var r=n(1002),o=n(6363),i=n(1785),u=n.n(i),c=n(297),a=n.n(c),l=n(1387),s=n(9953),f=n(5262).GitHubOAuthSdk.of({baseUrl:"https://app.divops.kr/github-api",getAuthorization:function(){var t=localStorage.getItem("authorization");if(null==t||""===t)throw Error("Authorization is null. (".concat(t,")"));return t}}),d=f.UserAPI,h=f.ResourceAPI.of({model:"gtd-todo"}),p=n(2700);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}var v=n(4039),b=n(505),O=["UserKey"];function y(){var t=(0,s.useState)(!0),e=t[0],n=t[1],r=(0,v.NL)();(0,s.useEffect)(function(){var t=setTimeout(function(){return n(!1)},200);return function(){return clearTimeout(t)}},[]);var o=(0,b.a)([].concat(O,[e]),d.fetchUser,{refetchOnMount:!0,refetchOnReconnect:!0,refetchOnWindowFocus:!0}),i=o.data,u=o.refetch,c=function(){r.invalidateQueries(O),localStorage.removeItem("authorization"),u()};return{data:null==i?void 0:i.data,isLoading:e,login:d.loginUser,logout:c}}y.key=O;var m={of:function(t){if("todo"===t)return h}},w=n(7048),k=function(){var t,e,n,i,c,f,d,v,O=(0,l.useRouter)(),k=(0,s.useState)(!1),Z=k[0],P=k[1],_=(e=(0,l.useRouter)(),{resetQueryParam:function(t){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach(function(e){(0,p.Z)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},e.query);delete n[t],e.replace({pathname:e.pathname,query:n})}}).resetQueryParam,j=y(),E=j.isLoading,S=j.data,x=j.login,A=j.logout,D=(n="todo",i=y().data,f=(c=(0,b.a)(["fetchList",null==i?void 0:i.login,n],(0,r.Z)(u().mark(function t(){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if((null==i?void 0:i.login)!=null){t.next=4;break}t.t0=[],t.next=7;break;case 4:return t.next=6,m.of(n).readList();case 6:t.t0=t.sent.data;case 7:return t.abrupt("return",t.t0);case 8:case"end":return t.stop()}},t)})),{initialData:[]})).data,d=c.refetch,[f,d,v=c.isLoading,c.isFetching]),L=(0,o.Z)(D,2),N=L[0],X=L[1],z=(0,s.useState)(),C=z[0],I=z[1];return((0,s.useEffect)(function(){if(O.isReady){var t=O.query.code;if(null==t||Array.isArray(t)){P(!1);return}P(!0),localStorage.setItem("authorization",t),_("code")}},[O]),Z||E)?(0,w.tZ)("div",{children:"로그인 중"}):(0,w.BX)("div",{children:[(0,w.tZ)(a(),{children:(0,w.tZ)("title",{children:"Hello world!"})}),(0,w.BX)("main",{children:[(0,w.tZ)("h1",{children:"Getting Things Done"}),(0,w.BX)("h4",{children:["welcome ",null!==(t=null==S?void 0:S.login)&&void 0!==t?t:"guest","!"]}),null==S?(0,w.tZ)("button",{onClick:x,children:"로그인"}):(0,w.tZ)("button",{onClick:function(){A(),O.reload()},children:"로그아웃"}),(0,w.BX)("div",{children:[(0,w.tZ)("input",{value:C}),(0,w.tZ)("br",{}),(0,w.tZ)("button",{onClick:(0,r.Z)(u().mark(function t(){return u().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.create({resource:{contents:C},summary:{contents:null==C?void 0:C.split("\n")[0]}});case 2:return I(""),t.next=5,X();case 5:case"end":return t.stop()}},t)})),children:"입력"})]}),(0,w.tZ)("ul",{children:N.map(function(t){return(0,w.tZ)("li",{children:t.contents})})})]})]})}},9638:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9079)}])}},function(t){t.O(0,[955,774,888,179],function(){return t(t.s=9638)}),_N_E=t.O()}]);