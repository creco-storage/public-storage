(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6488:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var n=r(297),o=r.n(n),i=r(1387),u=r(9953),c=r(2700);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var l=r(4039),f=r(505),s=r(5262).GitHubOAuthSdk.of({baseUrl:"https://app.divops.kr/github-api",getAuthorization:function(){var e=localStorage.getItem("authorization");if(null==e||""===e)throw Error("Authorization is null. (".concat(e,")"));return e}}),d=s.UserAPI;s.ResourceAPI.of({model:"gtd-todo"});var h=["UserKey"];function p(){var e=(0,u.useState)(!0),t=e[0],r=e[1],n=(0,l.NL)();(0,u.useEffect)(function(){var e=setTimeout(function(){return r(!1)},200);return function(){return clearTimeout(e)}},[]);var o=(0,f.a)([].concat(h,[t]),d.fetchUser,{refetchOnMount:!0,refetchOnReconnect:!0,refetchOnWindowFocus:!0}),i=o.data,c=o.refetch,a=function(){n.invalidateQueries(h),localStorage.removeItem("authorization"),c()};return{data:null==i?void 0:i.data,isLoading:t,login:d.loginUser,logout:a}}p.key=h;var g=r(7048),v=function(){var e,t=(0,i.useRouter)(),r=(0,u.useState)(!1),n=r[0],l=r[1],f=(e=(0,i.useRouter)(),{resetQueryParam:function(t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,c.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e.query);delete r[t],e.replace({pathname:e.pathname,query:r})}}).resetQueryParam,s=p(),d=s.isLoading,h=s.data,v=s.login,O=s.logout;return((0,u.useEffect)(function(){if(t.isReady){var e=t.query.code;if(null==e||Array.isArray(e)){l(!1);return}l(!0),localStorage.setItem("authorization",e),f("code")}},[t]),n||d)?(0,g.tZ)("div",{children:"로그인 중"}):(0,g.BX)("div",{children:[(0,g.tZ)(o(),{children:(0,g.tZ)("title",{children:"Hello world!"})}),(0,g.BX)("main",{children:[(0,g.tZ)("h1",{children:"hello world! GTD!"}),(0,g.BX)("div",{children:["login: ",null==h?void 0:h.login]}),null==h?(0,g.tZ)("button",{onClick:v,children:"로그인"}):(0,g.tZ)("button",{onClick:O,children:"로그아웃"})]})]})}},9638:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(6488)}])}},function(e){e.O(0,[526,774,888,179],function(){return e(e.s=9638)}),_N_E=e.O()}]);