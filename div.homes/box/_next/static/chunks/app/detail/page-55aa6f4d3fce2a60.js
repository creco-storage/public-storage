(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[654],{1760:function(e,t,n){Promise.resolve().then(n.bind(n,969))},969:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var r=n(4916),o=n(1330),i=n(4114),c=n(6767),a=n(9208),s=n(4901),l=n(9971),u=n.n(l),d=n(7505),p=n(8861),f=n(3308),b=n(258),y=n(9526),h=n(3588),x=n(3549),m=n(4607),g=n(1904),v=n(2972),w=n(4989),j=n(5626),k=n(6540),O=n(1213);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach(function(t){(0,c.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=function(){var e,t,n,c,l,Z,S,W=(0,d.useRouter)(),A=(0,p.useContext)(j.V),z=(0,d.useSearchParams)(),C=z.get("category"),D=z.get("id"),I=(0,w.Wo)(null!=C?C:"knowledge",D),K=(0,s.Z)(I,2),N=K[0],H=K[1],_=(0,w.Wo)(null!=C?C:"knowledge",null==N?void 0:null===(c=N.body)||void 0===c?void 0:c.parentId),B=(0,s.Z)(_,1)[0],E=(0,w.ZT)(null!=C?C:"knowledge",D),V=(0,s.Z)(E,1)[0],L=(0,w.AV)(),F=(0,s.Z)(L,1)[0],T=null!==(l=Object.entries(null!=F?F:[]).find(function(e){return(null==e?void 0:e[1])===C}))&&void 0!==l?l:[],R=(0,s.Z)(T,2),q=R[0],G=R[1],J=(t=(0,a.Z)(u().mark(function e(t){var n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=P(P({},N.body),{},{contents:t,updatedAt:Date.now()}),e.next=4,f.b.of(C).updateItem(N.id,n);case 4:return e.next=6,H();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),"Not Allowed"===e.t0.response.data.message&&W.push("/login");case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return t.apply(this,arguments)}),M=(n=(0,a.Z)(u().mark(function e(t){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.b.of(C).createItem({contents:t,priority:V.length,updatedAt:Date.now(),parentId:D});case 3:return e.next=5,new Promise(function(e){return setTimeout(e,1e3)});case 5:return e.next=7,H();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),"Not Allowed"===e.t0.response.data.message&&W.push("/login");case 12:case"end":return e.stop()}},e,null,[[0,9]])})),function(e){return n.apply(this,arguments)});return null==N?(0,O.jsx)("main",{children:(0,O.jsx)(b.W,{width:720,children:""})}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(h.K,{size:60}),(0,O.jsx)("main",{children:(0,O.jsxs)(b.W,{width:720,children:[(0,O.jsxs)(x.K.Horizontal,{align:"space-between",children:[(0,O.jsxs)(x.K.Vertical,{align:"left",children:[(0,O.jsxs)(x.K.Horizontal,{children:[(0,O.jsx)(g.H,{style:{fontWeight:"bold",fontSize:"16px",cursor:"pointer",textDecoration:"underline",marginBottom:"8px",width:"unset"},onClick:function(){W.push("/?category=".concat(G))},children:q}),null!=B?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(g.H,{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"8px",marginLeft:"8px",width:"unset"},children:">"}),(0,O.jsx)(g.H,{style:{fontWeight:"bold",fontSize:"16px",cursor:"pointer",textDecoration:"underline",marginBottom:"8px",marginLeft:"8px",whiteSpace:"normal",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:function(){W.push("/detail/?category=".concat(G,"&id=").concat(B.id))},children:null===(Z=B.body.contents.split("\n"))||void 0===Z?void 0:Z[0]})]}):null]}),(0,O.jsx)(g.H,{style:{fontWeight:"bold",fontSize:"24px"},children:null===(S=N.body.contents.split("\n"))||void 0===S?void 0:S[0]})]}),(0,O.jsx)(x.K.Horizontal,{children:A?(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(v.L,{onClick:(0,a.Z)(u().mark(function e(){return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.b.of(C).deleteItem(N.id);case 3:return e.next=5,new Promise(function(e){return setTimeout(e,1e3)});case 5:return e.next=7,H();case 7:if(!(null!=B)){e.next=10;break}return W.push("/detail/?category=".concat(G,"&id=").concat(B.id)),e.abrupt("return");case 10:W.push("/?category=".concat(C)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),"Not Allowed"===e.t0.response.data.message&&W.push("/login");case 16:case"end":return e.stop()}},e,null,[[0,13]])})),children:"삭제"})}):null})]}),(0,O.jsx)(m.K.View,{style:{alignItems:"flex-start"},value:(e=N.body.contents.split("\n"),(0,r.Z)(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,o.Z)(e)||(0,i.Z)()).slice(1).join("\n")}),A?(0,O.jsx)(k.l,{openKey:"m",initialValue:N.body.contents,onSubmit:J}):null,A?(0,O.jsx)(k.l,{openKey:"k",onSubmit:M}):null,(0,O.jsx)("ul",{children:V.sort(function(e,t){var n,r;return(null!==(n=e.body.priority)&&void 0!==n?n:0)>(null!==(r=t.body.priority)&&void 0!==r?r:0)?-1:1}).map(function(e,t){var n,r;return(0,O.jsx)(y.d,{data:P({id:e.id},e.body),onClick:function(){W.push("/detail?category=".concat(C,"&id=").concat(e.id))},viewButtons:{"⬆":(n=(0,a.Z)(u().mark(function e(){var n,r,o,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<=0)){e.next=2;break}return e.abrupt("return");case 2:return n=V[t],r=V[t-1],o=P(P({},n.body),{},{priority:r.body.priority}),i=P(P({},r.body),{},{priority:n.body.priority}),e.prev=6,e.next=9,f.b.of(C).updateItems([{id:n.id,body:o},{id:r.id,body:i}]);case 9:return e.next=11,H();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),"Not Allowed"===e.t0.response.data.message&&W.push("/login");case 16:case"end":return e.stop()}},e,null,[[6,13]])})),function(){return n.apply(this,arguments)}),"⬇":(r=(0,a.Z)(u().mark(function e(){var n,r,o,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t>=V.length-1)){e.next=2;break}return e.abrupt("return");case 2:return n=V[t],r=V[t+1],o=P(P({},n.body),{},{priority:r.body.priority}),i=P(P({},r.body),{},{priority:n.body.priority}),e.prev=6,e.next=9,f.b.of(C).updateItems([{id:n.id,body:o},{id:r.id,body:i}]);case 9:return e.next=11,H();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),"Not Allowed"===e.t0.response.data.message&&W.push("/login");case 16:case"end":return e.stop()}},e,null,[[6,13]])})),function(){return r.apply(this,arguments)})}},"".concat(e.id,"-").concat(t))})})]})})]})}}},function(e){e.O(0,[527,363,610,246,636,795,744],function(){return e(e.s=1760)}),_N_E=e.O()}]);