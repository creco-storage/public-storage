(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8555:function(e,t,r){Promise.resolve().then(r.bind(r,9889))},9889:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return V}});var n=r(8861),o=r(258),s=r(5626),i=r(9208),a=r(6195),c=r(9971),l=r.n(c),u=r(7505),p=r(7473),d=r(3625),f=r(6767),x=r(1904),b=r(1213),y=["className","style","setValue","value","rows","cols","onFocus"];function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,f.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v=(0,n.forwardRef)(function(e,t){var r=e.className,n=e.style,o=e.setValue,s=e.value,i=e.rows,a=e.cols,c=e.onFocus,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,y);return(0,b.jsx)("textarea",h({ref:t,className:r,spellCheck:!1,style:h({resize:"none",width:"".concat(null==a?"100%":"auto"),fontSize:"1.6rem",wordBreak:"keep-all",whiteSpace:"pre-line",fontFamily:'"Noto Sans KR", sans-serif'},null!=n?n:{}),value:s,rows:null!=i?i:s.split("\n").length,cols:a,onChange:function(e){return o(e.target.value)},onFocus:c},l))});v.displayName="TextArea";var j=Object.assign(v,{View:function(e){var t=e.value,r=e.style,n=e.onClick;return null==t?null:(0,b.jsx)(x.H,{style:h({padding:"3px"},null!=r?r:{}),onClick:n,children:t.replace(/(https?:\/\/\S+)/g,'<a href="$1" target="_blank" style="color: blue; text-decoration: underline;">Link</a>')})}}),w=(0,n.forwardRef)(function(e,t){var r=e.style,o=e.defaultText,s=e.onFocus,i=e.placeholder,a=e.disabled,c=e.children,l=(0,n.useState)(null!=o?o:""),u=l[0],p=l[1];return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j,{ref:t,value:u,setValue:p,rows:Math.max(2,u.split("\n").length),style:r,onFocus:s,placeholder:i,disabled:void 0!==a&&a}),c]})}),O=r(4989),m=r(6282);function k(){var e,t=(0,u.useRouter)(),r=(0,u.useSearchParams)().get("category"),s=(0,O.ZT)(null!=r?r:"knowledge"),c=(0,a.Z)(s,2),f=c[0],x=c[1],y=(0,n.useRef)(null),g=(0,n.useState)(!1),h=g[0],v=g[1],j=(e=(0,i.Z)(l().mark(function e(n){var o;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={contents:n,priority:f.length,createdAt:Date.now()},e.prev=1,e.next=4,p.b.of(r).createItem(o);case 4:return e.next=6,new Promise(function(e){return setTimeout(e,1e3)});case 6:return e.next=8,x();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"Not Allowed"===e.t0.response.data.message&&t.push("/login");case 13:case"end":return e.stop()}},e,null,[[1,10]])})),function(t){return e.apply(this,arguments)}),k=function(){if(h){v(!1);return}v(!0),setTimeout(function(){var e;null===(e=y.current)||void 0===e||e.focus()},0)};return((0,m.J)({k:function(){return k()},Escape:function(){return v(!1)},Enter:function(){var e,t=null===(e=y.current)||void 0===e?void 0:e.value;null!=t&&(j(t),v(!1))}},[h]),h)?(0,b.jsx)(d.h,{children:(0,b.jsx)(o.W,{onClick:function(){v(!1)},width:720,style:{position:"fixed",backgroundColor:"#c8c8c8aa",top:0,left:0,width:"100vw",height:"100vh"},children:(0,b.jsx)("div",{style:{width:"720px",transform:"translate(-50%, -50%)",top:"50%",left:"50%",position:"relative"},children:(0,b.jsx)(w,{ref:y,onSubmit:j,style:{backgroundColor:"#c8c8c8d0",border:"0px",outline:"none",boxShadow:"rgba(0, 0, 0, 0.2) 0px 1px 2px 0px, rgba(0, 0, 0, 0.19) 0px 2px 5px 0px",height:"200px",overflowY:"scroll"}})})})}):null}function P(e){var t=e.value;return(0,b.jsx)(b.Fragment,{children:e.cases[t]})}var S=r(3549);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){var t=e.style,r=e.id,n=e.className,o=e.left,s=e.right,i=e.bottom;return(0,b.jsxs)("li",{className:n,style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){(0,f.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({borderRadius:"6px"},null!=t?t:{}),children:[(0,b.jsxs)(S.K.Horizontal,{style:{alignItems:"baseline",justifyContent:"space-between"},children:[o,s]}),i]},r)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Z(e){var t=e.className,r=e.style,n=e.onClick,o=e.children;return(0,b.jsx)("button",{className:t,style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach(function(t){(0,f.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({border:"unset",background:"unset",wordBreak:"keep-all",textDecoration:"underline",cursor:"pointer"},null!=r?r:{}),onClick:n,children:o})}function E(e){e.id;var t,r=e.data,o=e.viewButtons,i=e.editButtons,c=(0,n.useState)(r.contents),l=c[0],u=c[1],p=(0,n.useState)("view"),d=p[0],f=p[1],x=(0,n.useContext)(s.V);return(0,b.jsx)(P,{value:d,cases:{detail:(0,b.jsx)(C,{style:{backgroundColor:"#e8e8e8",padding:"6px",marginBottom:"12px",border:"1px solid #efefef",boxShadow:"rgba(0, 0, 0, 0.2) 0px 1px 2px 0px, rgba(0, 0, 0, 0.19) 0px 2px 5px 0px"},left:(0,b.jsx)(j.View,{style:{alignItems:"flex-start"},value:l}),right:x?Object.entries(o).map(function(e){var t=(0,a.Z)(e,2),r=t[0],n=t[1];return(0,b.jsx)(Z,{style:{paddingTop:"5px",alignItems:"flex-start"},onClick:function(){return n({text:l,setMode:f,setText:u})},children:r},r)}):null,bottom:(0,b.jsxs)(S.K.Horizontal,{style:{},children:[(0,b.jsx)(j.View,{style:{textAlign:"left",fontSize:"1rem",cursor:"pointer",width:"50px",fontWeight:"bold",textDecoration:"underline"},value:"▲ 접기",onClick:function(){return f("view")}}),(0,b.jsx)(j.View,{style:{textAlign:"right",fontSize:"1rem"},value:new Date(null!==(t=r.updatedAt)&&void 0!==t?t:r.createdAt).toLocaleString()})]})}),view:(0,b.jsx)(C,{style:{padding:"6px",marginBottom:"12px",border:"1px solid #efefef",boxShadow:"rgba(0, 0, 0, 0.2) 0px 1px 2px 0px, rgba(0, 0, 0, 0.19) 0px 2px 5px 0px"},left:(0,b.jsx)(j.View,{style:{alignItems:"flex-start",cursor:"pointer"},value:l.split("\n")[0],onClick:function(){f("detail")}}),right:x?Object.entries(o).map(function(e){var t=(0,a.Z)(e,2),r=t[0],n=t[1];return(0,b.jsx)(Z,{style:{paddingTop:"5px",alignItems:"flex-start"},onClick:function(){return n({text:l,setMode:f,setText:u})},children:r},r)}):null,bottom:null}),edit:x&&null!=i?(0,b.jsx)(C,{style:{padding:"6px",marginBottom:"12px",border:"1px solid #efefef",boxShadow:"rgba(0, 0, 0, 0.2) 0px 1px 2px 0px, rgba(0, 0, 0, 0.19) 0px 2px 5px 0px"},left:(0,b.jsx)(j,{style:{alignItems:"flex-start",border:"white 1px solid",borderBottom:"1px solid #c8c8c8"},value:l,setValue:u}),right:Object.entries(i).map(function(e){var t=(0,a.Z)(e,2),r=t[0],n=t[1];return(0,b.jsx)(Z,{style:{alignItems:"flex-start",paddingTop:"5px"},onClick:function(){return n({text:l,setMode:f,setText:u})},children:r},r)})}):null}})}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){(0,f.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A(){var e=(0,u.useRouter)(),t=(0,u.useSearchParams)().get("category"),r=(0,O.ZT)(null!=t?t:"knowledge"),n=(0,a.Z)(r,2),o=n[0],s=n[1];return(0,b.jsx)("ul",{children:o.sort(function(e,t){var r,n;return(null!==(r=e.body.priority)&&void 0!==r?r:0)>(null!==(n=t.body.priority)&&void 0!==n?n:0)?-1:1}).map(function(r,n){var a,c,u,d;return(0,b.jsx)(E,{id:r.id,data:r.body,viewButtons:{수정:function(e){return(0,e.setMode)("edit")},삭제:(a=(0,i.Z)(l().mark(function n(){return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.b.of(t).deleteItem(r.id);case 3:return n.next=5,new Promise(function(e){return setTimeout(e,1e3)});case 5:return n.next=7,s();case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),"Not Allowed"===n.t0.response.data.message&&e.push("/login");case 12:case"end":return n.stop()}},n,null,[[0,9]])})),function(){return a.apply(this,arguments)}),"⬆":(c=(0,i.Z)(l().mark(function r(){var i,a,c,u;return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<=0)){r.next=2;break}return r.abrupt("return");case 2:return i=o[n],a=o[n-1],c=I(I({},i.body),{},{priority:a.body.priority}),u=I(I({},a.body),{},{priority:i.body.priority}),r.prev=6,r.next=9,p.b.of(t).updateItems([{id:i.id,body:c},{id:a.id,body:u}]);case 9:return r.next=11,s();case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),"Not Allowed"===r.t0.response.data.message&&e.push("/login");case 16:case"end":return r.stop()}},r,null,[[6,13]])})),function(){return c.apply(this,arguments)}),"⬇":(u=(0,i.Z)(l().mark(function r(){var i,a,c,u;return l().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n>=o.length-1)){r.next=2;break}return r.abrupt("return");case 2:return i=o[n],a=o[n+1],c=I(I({},i.body),{},{priority:a.body.priority}),u=I(I({},a.body),{},{priority:i.body.priority}),r.prev=6,r.next=9,p.b.of(t).updateItems([{id:i.id,body:c},{id:a.id,body:u}]);case 9:return r.next=11,s();case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(6),"Not Allowed"===r.t0.response.data.message&&e.push("/login");case 16:case"end":return r.stop()}},r,null,[[6,13]])})),function(){return u.apply(this,arguments)})},editButtons:{제출:(d=(0,i.Z)(l().mark(function n(o){var i,a,c;return l().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return i=o.text,a=o.setMode,n.prev=1,c=I(I({},r.body),{},{contents:i,updatedAt:Date.now()}),n.next=5,p.b.of(t).updateItem(r.id,c);case 5:return n.next=7,s();case 7:a("view"),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),"Not Allowed"===n.t0.response.data.message&&e.push("/login");case 13:case"end":return n.stop()}},n,null,[[1,10]])})),function(e){return d.apply(this,arguments)}),취소:function(e){var t=e.setText,n=e.setMode;t(r.body.contents),n("view")}}},"".concat(r.id,"-").concat(n))})})}var V=function(){var e=(0,n.useContext)(s.V);return(0,b.jsx)("main",{children:(0,b.jsxs)(o.W,{width:720,children:[(0,b.jsx)(n.Suspense,{children:(0,b.jsx)(A,{})}),e?(0,b.jsx)(k,{}):null]})})}}},function(e){e.O(0,[527,99,809,636,795,744],function(){return e(e.s=8555)}),_N_E=e.O()}]);